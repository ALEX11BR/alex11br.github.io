<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ThemeChanger, my first serious linux deskop app | Popa Ioan Alexandru</title>
<meta name=keywords content><meta name=description content="ThemeChanger is an application that I made, one of my more ambitious projects so far. It is made for linux systems (and it should work on other friends like BSDs), and it does what it says: it changes themes. It is made to work with various desktop environments or none at all. While there is similar app called lxappearance which is also a GUI theme changer, my app has a bunch of extra features."><meta name=author content><link rel=canonical href=https://alex11br.github.io/posts/themechanger/><link crossorigin=anonymous href=/assets/css/stylesheet.0c4fd3725171366f335155acde6fb3c7b7042cd2fd075bebf5023d9b28a701b2.css integrity="sha256-DE/TclFxNm8zUVWs3m+zx7cELNL9B1vr9QI9myinAbI=" rel="preload stylesheet" as=style><link rel=icon href=https://alex11br.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://alex11br.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://alex11br.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://alex11br.github.io/apple-touch-icon.png><link rel=mask-icon href=https://alex11br.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://alex11br.github.io/posts/themechanger/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="ThemeChanger, my first serious linux deskop app"><meta property="og:description" content="ThemeChanger is an application that I made, one of my more ambitious projects so far. It is made for linux systems (and it should work on other friends like BSDs), and it does what it says: it changes themes. It is made to work with various desktop environments or none at all. While there is similar app called lxappearance which is also a GUI theme changer, my app has a bunch of extra features."><meta property="og:type" content="article"><meta property="og:url" content="https://alex11br.github.io/posts/themechanger/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-06T07:51:57+00:00"><meta property="article:modified_time" content="2021-12-06T07:51:57+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ThemeChanger, my first serious linux deskop app"><meta name=twitter:description content="ThemeChanger is an application that I made, one of my more ambitious projects so far. It is made for linux systems (and it should work on other friends like BSDs), and it does what it says: it changes themes. It is made to work with various desktop environments or none at all. While there is similar app called lxappearance which is also a GUI theme changer, my app has a bunch of extra features."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://alex11br.github.io/posts/"},{"@type":"ListItem","position":2,"name":"ThemeChanger, my first serious linux deskop app","item":"https://alex11br.github.io/posts/themechanger/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ThemeChanger, my first serious linux deskop app","name":"ThemeChanger, my first serious linux deskop app","description":"ThemeChanger is an application that I made, one of my more ambitious projects so far. It is made for linux systems (and it should work on other friends like BSDs), and it does what it says: it changes themes. It is made to work with various desktop environments or none at all. While there is similar app called lxappearance which is also a GUI theme changer, my app has a bunch of extra features.","keywords":[],"articleBody":" ThemeChanger is an application that I made, one of my more ambitious projects so far. It is made for linux systems (and it should work on other friends like BSDs), and it does what it says: it changes themes. It is made to work with various desktop environments or none at all. While there is similar app called lxappearance which is also a GUI theme changer, my app has a bunch of extra features.\nHow I got the idea for this app As I started using linux more and more, I eventually learned about tiling window managers, and started using them instead of regular desktop environments. I was a little bit too obsessed with ensuring a consistent look \u0026 feel for my desktop, and the available GUI tools had some limitations that I felt could be addressed by a new application that I could write. So I started working on a such application: I attempted multiple programming languages, but ended up with Python, as I could do stuff easier with it.\nFeatures of the app Sets GTK themes. Sets icon themes. Sets cursor themes. Sets Kvantum themes, if support is detected. Can set different themes for GTK 2, GTK 4 (useful if the currently selected theme for GTK 3 doesn’t have a version for any of these versions). All these themes can be selected using a searchable theme list, which makes managing a large theme collection easier. The first 3 have also thumbails for each theme so that they can be easily identified. Supports live reloading using a variety of mechanisms: either the DE-independent xsettingsd, or the various solutions provided by each DE (note that setting different GTK themes for different versions can’t work at all in this case). Lets the user make and edit custom GTK CSS with live, in-app preview. Sets various options related to fonts widgets, etc. Lets the user quickly install theme archives to their user installation paths. How the development went On linux, the main GUI toolkit, for which themes are made is GTK. As such, I decided that my application should be written using this toolkit. I attempted various languages (that have bindings to GTK - many have them, and these bindings have minimal dependencies besides what one is expected to have in a linux installation), and after months of painful research and failed attempts in Rust and Vala, the Python app got published on GitHub for the first time in July 2021, though it definitely wasn’t done yet: it had some bugs, and some missing features that I wanted.\nAfter fixing some early bugs, I started working on adding a new feature: thumbnails for all the available GTK, icon, cursor themes. The GTK and icon themes thumbnails were easily added, as in the theme folder, a GTK theme may have a thumbnail.png that can be loaded and displayed with ease (for those that don’t have it, a dummy image is displayed), and the icon themes have icons which can also be easily displayed. The cursor themes, on the other hand, aren’t so easy to get displayed: the cursor are stored in a specific format, decodable by libxcursor, a library used by the theme changers in XFCE and MATE for cursor themes previews, though I couldn’t really understand their implementations of this feature. I even thought at that time to rewrite once again the app in a language with some sort of access to libxcursor, but I let that feature for another time. I eventually managed to just use the C code of the XFCE theme changer (they’re an open source project, after all) in a C Python module after some time.\nWhile the searchable theme list made the app unique in a good sense, it turned out that it made the app print tons of stacktraces, and I had to figure out the nasty code that produced this stacktrace, that I managed to fix, alongside other hidden issues.\nAlongside GTK, there’s another big GUI toolkit for linux: QT. While the GTK themes are somewhat standardised for each version, QT’s theming is messier. A popular method of theming QT is Kvantum, for which many GTK themes have a counterpart. Adding support for setting its themes wasn’t the hardest feature to be implemented, though there’s some stuff that can be further implemented for a more complete theme changing experience. That being said, this feature made the app unique and distinguishable enough to give me confidence in promoting it to public linux-related circles.\nThe next feature to get implemented is live reloading. In linux, this is possible using XSETTINGS, a protocol through which various values related to look \u0026 feel can get set and updated instantaneousely across the apps that use them. To make XSETTINGS work, you need a daemon that takes care of these values. There are a few daemons available, ranging from the DE-independent xsettingsd to the sollutions provided by each DE. Each daemon has its own method of updating the values, and I had to implement methods of doing that for each daemon. I first implemented support for xsettingsd, then gradually for the daemons which come with the DEs of linux, with methods of determining which daemon is running, if any.\nThis is where the app stands at the moment of writing this post. I have some plans for the future, though.\nPlans for the future First, I plan to add a method to get themes online, from the dedicated sites like https://gnome-look.org and friends. While their sites’ UX really sucks, they supposedly provide some APIs that can be used, though I couldn’t yet wrap my head around how they work. Hopefully I will achieve that eventually…\nThis is a big milestone to be achieved. I also plan on adding some more theming options to my app, like whether clicking the scrollbar will move the content directly to the selected position or page by page. I also want all these options to be applied to Kvantum too, which requires copying a theme file into Kvantum’s config folder, which requires storing for each theme its path, which is also useful for another feature I want to add: the ability to remove locally installed themes.\nBesides these, I feel like the code I’ve written isn’t the cleanest, most well-organized there is (after all, this is, like, my first serious programming project that I share with the public), and I feel like I should make something about it sometime, maybe…\nHow to get this app The GitHub README has instructions to install the app from source, and from some distros’ repos:\nArch Linux \u0026 friends: the themechanger-git AUR package Nix(OS): the themechanger nixpkgs package ","wordCount":"1108","inLanguage":"en","datePublished":"2021-12-06T07:51:57Z","dateModified":"2021-12-06T07:51:57Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://alex11br.github.io/posts/themechanger/"},"publisher":{"@type":"Organization","name":"Popa Ioan Alexandru","logo":{"@type":"ImageObject","url":"https://alex11br.github.io/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://alex11br.github.io/ accesskey=h title="Popa Ioan Alexandru (Alt + H)"><img src=https://alex11br.github.io/logo.jpg alt aria-label=logo height=32>Popa Ioan Alexandru</a><div class=logo-switches><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://alex11br.github.io/posts title=Posts><span>Posts</span></a></li><li><a href=https://alex11br.github.io/projects title=Projects><span>Projects</span></a></li><li><a href=https://alex11br.github.io/contact title=Contact><span>Contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>ThemeChanger, my first serious linux deskop app</h1><div class=post-meta>&lt;span title='2021-12-06 07:51:57 +0000 UTC'>December 6, 2021&lt;/span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#how-i-got-the-idea-for-this-app aria-label="How I got the idea for this app">How I got the idea for this app</a></li><li><a href=#features-of-the-app aria-label="Features of the app">Features of the app</a></li><li><a href=#how-the-development-went aria-label="How the development went">How the development went</a></li><li><a href=#plans-for-the-future aria-label="Plans for the future">Plans for the future</a></li><li><a href=#how-to-get-this-app aria-label="How to get this app">How to get this app</a></li></ul></div></details></div><div class=post-content><p><img loading=lazy src=https://raw.githubusercontent.com/ALEX11BR/ThemeChanger/master/screenshot1.png alt="A screenshot of our lovely ThemeChanger"></p><p><a href=https://github.com/ALEX11BR/ThemeChanger>ThemeChanger</a> is an application that I made, one of my more ambitious projects so far. It is made for linux systems (and it should work on other friends like BSDs), and it does what it says: it changes themes. It is made to work with various desktop environments or none at all. While there is similar app called <code>lxappearance</code> which is also a GUI theme changer, my app has a bunch of extra features.</p><h2 id=how-i-got-the-idea-for-this-app>How I got the idea for this app</h2><p>As I started using linux more and more, I eventually learned about tiling window managers, and started using them instead of regular desktop environments. I was a little bit too obsessed with ensuring a consistent look & feel for my desktop, and the available GUI tools had some limitations that I felt could be addressed by a new application that I could write. So I started working on a such application: I attempted multiple programming languages, but ended up with Python, as I could do stuff easier with it.</p><h2 id=features-of-the-app>Features of the app</h2><ul><li>Sets GTK themes.</li><li>Sets icon themes.</li><li>Sets cursor themes.</li><li>Sets Kvantum themes, if support is detected.</li><li>Can set different themes for GTK 2, GTK 4 (useful if the currently selected theme for GTK 3 doesn&rsquo;t have a version for any of these versions).</li><li>All these themes can be selected using a searchable theme list, which makes managing a large theme collection easier. The first 3 have also thumbails for each theme so that they can be easily identified.</li><li>Supports live reloading using a variety of mechanisms: either the DE-independent <code>xsettingsd</code>, or the various solutions provided by each DE (note that setting different GTK themes for different versions can&rsquo;t work at all in this case).</li><li>Lets the user make and edit custom GTK CSS with live, in-app preview.</li><li>Sets various options related to fonts widgets, etc.</li><li>Lets the user quickly install theme archives to their user installation paths.</li></ul><h2 id=how-the-development-went>How the development went</h2><p>On linux, the main GUI toolkit, for which themes are made is GTK. As such, I decided that my application should be written using this toolkit. I attempted various languages (that have bindings to GTK - many have them, and these bindings have minimal dependencies besides what one is expected to have in a linux installation), and after months of painful research and failed attempts in Rust and Vala, the Python app got published on GitHub for the first time in July 2021, though it definitely wasn&rsquo;t <em>done</em> yet: it had some bugs, and some missing features that I wanted.</p><p>After fixing some early bugs, I started working on adding a new feature: thumbnails for all the available GTK, icon, cursor themes. The GTK and icon themes thumbnails were easily added, as in the theme folder, a GTK theme may have a <code>thumbnail.png</code> that can be loaded and displayed with ease (for those that don&rsquo;t have it, a dummy image is displayed), and the icon themes have icons which can also be easily displayed. The cursor themes, on the other hand, aren&rsquo;t so easy to get displayed: the cursor are stored in a specific format, decodable by <code>libxcursor</code>, a library used by the theme changers in XFCE and MATE for cursor themes previews, though I couldn&rsquo;t really understand their implementations of this feature. I even thought at that time to rewrite once again the app in a language with some sort of access to <code>libxcursor</code>, but I let that feature for another time. I eventually managed to just use the C code of the XFCE theme changer (they&rsquo;re an open source project, after all) in a C Python module after some time.</p><p>While the searchable theme list made the app unique in a good sense, it turned out that it made the app print tons of stacktraces, and I had to figure out the nasty code that produced this stacktrace, that I managed to fix, alongside other hidden issues.</p><p>Alongside GTK, there&rsquo;s another big GUI toolkit for linux: QT. While the GTK themes are somewhat standardised for each version, QT&rsquo;s theming is messier. A popular method of theming QT is Kvantum, for which many GTK themes have a counterpart. Adding support for setting its themes wasn&rsquo;t the hardest feature to be implemented, though there&rsquo;s some stuff that can be further implemented for a more complete theme changing experience. That being said, this feature made the app unique and distinguishable enough to give me confidence in <a href=https://www.reddit.com/r/linux/comments/pfgl79/themechanger_a_theme_changing_utility_for_linux/>promoting it to public linux-related circles</a>.</p><p>The next feature to get implemented is live reloading. In linux, this is possible using XSETTINGS, a protocol through which various values related to look & feel can get set and updated instantaneousely across the apps that use them. To make XSETTINGS work, you need a daemon that takes care of these values. There are a few daemons available, ranging from the DE-independent <code>xsettingsd</code> to the sollutions provided by each DE. Each daemon has its own method of updating the values, and I had to implement methods of doing that for each daemon. I first implemented support for <code>xsettingsd</code>, then gradually for the daemons which come with the DEs of linux, with methods of determining which daemon is running, if any.</p><p>This is where the app stands at the moment of writing this post. I have some plans for the future, though.</p><h2 id=plans-for-the-future>Plans for the future</h2><p>First, I plan to add a method to get themes online, from the dedicated sites like <a href=https://gnome-look.org>https://gnome-look.org</a> and friends. While their sites&rsquo; UX really sucks, they supposedly provide some APIs that can be used, though I couldn&rsquo;t yet wrap my head around how they work. Hopefully I will achieve that eventually&mldr;</p><p>This is a big milestone to be achieved. I also plan on adding some more theming options to my app, like whether clicking the scrollbar will move the content directly to the selected position or page by page. I also want all these options to be applied to Kvantum too, which requires copying a theme file into Kvantum&rsquo;s config folder, which requires storing for each theme its path, which is also useful for another feature I want to add: the ability to remove locally installed themes.</p><p>Besides these, I feel like the code I&rsquo;ve written isn&rsquo;t the cleanest, most well-organized there is (after all, this is, like, my first serious programming project that I share with the public), and I feel like I should make something about it sometime, maybe&mldr;</p><h2 id=how-to-get-this-app>How to get this app</h2><p>The <a href=https://github.com/ALEX11BR/ThemeChanger>GitHub README</a> has instructions to install the app from source, and from some distros&rsquo; repos:</p><ul><li><strong>Arch Linux & friends</strong>: the <code>themechanger-git</code> AUR package</li><li><strong>Nix(OS)</strong>: the <code>themechanger</code> nixpkgs package</li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>Feel free to do whatever with my content, unless another stricter license is specified.</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>